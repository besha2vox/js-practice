let books = [
    {
        id: '1',
        title: `Apple. –≠–≤–æ–ª—é—Ü–∏—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞`,
        author: `–í–ª–∞–¥–∏–º–∏—Ä –ù–µ–≤–∑–æ—Ä–æ–≤`,
        img: `https://bukva.ua/img/products/449/449532_200.jpg`,
        plot: `–ë–æ–≥–∞—Ç–æ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ 
       –∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –∏–∑–ª–æ–∂–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏ Apple –Ω–∞ —Ñ–æ–Ω–µ –∏—Å—Ç–æ—Ä–∏–∏ 
       –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –≤ —Ü–µ–ª–æ–º.
       –í –∫–Ω–∏–≥–µ –¥–∞–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –¥–µ—Å—è—Ç–∫–æ–≤ –Ω–∞–∏–±–æ–ª–µ–µ –∑–Ω–∞—á–∏–º—ã—Ö –º–æ–¥–µ–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∫–∞–∫ Apple, —Ç–∞–∫ –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π, 
       —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–µ—Å—è –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Å—Ç—É–¥–∏–π–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.
       –ö–Ω–∏–≥–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —à–∏—Ä–æ–∫–æ–≥–æ –∫—Ä—É–≥–∞ —á–∏—Ç–∞—Ç–µ–ª–µ–π, –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏. 
       –û–Ω–∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –ø–æ—Å–ª—É–∂–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤, –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–≤ –∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π.`,
    },
    {
        id: '2',
        title: `–ö–∞–∫ –æ–±—ä—è—Å–Ω–∏—Ç—å —Ä–µ–±–µ–Ω–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫—É`,
        author: `–ö—ç—Ä–æ–ª –í–æ—Ä–¥–µ—Ä–º–∞–Ω`,
        img: `https://bukva.ua/img/products/480/480030_200.jpg`,
        plot: `–ò–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —ç–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏ –æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö, —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö 
           –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–µ. –ü–æ—à–∞–≥–æ–≤–æ –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –¥–µ—Ç—è–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä—ã –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–µ—Ä–≤–∏—Å—ã, 
           –æ—Å—Ç–∞–≤–∞—è—Å—å –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. 
           –ö–Ω–∏–≥–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–æ –≤—Å–µ–º: –æ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–æ –∂–∏–∑–Ω–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, 
           –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –∞—Ç–∞–∫. –û —Ç–æ–º, –∫–∞–∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç, –æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º 
           –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–∏, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ —Ü–∏—Ñ—Ä–æ–≤–æ–º —ç—Ç–∏–∫–µ—Ç–µ. –í—Å–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã - –æ—Ç —Ö–∞–∫–µ—Ä–∞ –¥–æ –±–∏—Ç–∫–æ–∏–Ω–∞ - 
           –æ–±—ä—è—Å–Ω—è—é—Ç—Å—è –Ω–∞–≥–ª—è–¥–Ω–æ —Å –ø–æ–º–æ—â—å—é –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π –∏ —Å—Ö–µ–º.`,
    },
    {
        id: '3',
        title: `–ü—É—Ç—å —Å–∫—Ä–∞–º-–º–∞—Å—Ç–µ—Ä–∞. #ScrumMasterWay`,
        author: `–ó—É–∑–∞–Ω–∞ –®–æ—Ö–æ–≤–∞`,
        img: `https://bukva.ua/img/products/480/480090_200.jpg`,
        plot: `–≠—Ç–∞ –∫–Ω–∏–≥–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å—Ç–∞—Ç—å –≤—ã–¥–∞—é—â–∏–º—Å—è —Å–∫—Ä–∞–º-–º–∞—Å—Ç–µ—Ä–æ–º –∏ –¥–æ–±–∏—Ç—å—Å—è –æ—Ç–ª–∏—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–æ–π. 
       –û–Ω–∞ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏ –ª–µ–≥–∫–∞—è –¥–ª—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è - –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –µ–µ –∑–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ 
       –∑–Ω–∞–Ω–∏—è–º–∏ –±—É–¥–µ—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–π –∫–∞—Ä—å–µ—Ä—ã.
       –û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ 15-–ª–µ—Ç–Ω–µ–º –æ–ø—ã—Ç–µ, –ó—É–∑–∞–Ω–∞ –®–æ—Ö–æ–≤–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ä–æ–ª–∏ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –µ—Å—Ç—å —É —Å–∫—Ä–∞–º-–º–∞—Å—Ç–µ—Ä–∞, 
       –∫–∞–∫ –µ–º—É —Ä–µ—à–∞—Ç—å –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–∞–∫–∏–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å –≤—ã–¥–∞—é—â–∏–º—Å—è —Å–∫—Ä–∞–º-–º–∞—Å—Ç–µ—Ä–æ–º, 
       –∫–∞–∫–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –µ–º—É –Ω—É–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.`,
    },
];

const refs = {
    rootRef: document.querySelector('#root'),
};

const divLeft = document.createElement('div');
divLeft.classList.add('left');

const divRight = document.createElement('div');
divRight.classList.add('right');

refs.rootRef.append(divLeft, divRight);

const header = document.createElement('h1');
header.classList.add('header__one');

const list = document.createElement('ul');
list.classList.add('list');

const btn = document.createElement('button');
btn.classList.add('btn');
btn.textContent = 'add';

divLeft.append(header, list, btn);

const renderList = () => {
    const template = books
        .map((elem) => {
            return `<li data-id="${elem.id}" class="list__item">
  <p class="title">${elem.title}</p>
  <button type="button" class="edit">‚úèÔ∏è edit</button>
  <button type="button" class="delete">üöÆ delete</button>
</li>`;
        })
        .join('');

    list.insertAdjacentHTML('afterbegin', template);

    const tittlesRef = document.querySelectorAll('.title');
    tittlesRef.forEach((tittle) => {
        tittle.addEventListener('click', onTittleClick);
    });

    const btnsDel = document.querySelectorAll('.delete');
    const btnsEdit = document.querySelectorAll('.edit');

    btnsDel.forEach((btn) => btn.addEventListener('click', deleteElement));
    btnsEdit.forEach((btn) => btn.addEventListener('click', editElement));
};

renderList();

const btnAddRef = document.querySelector('.btn');
btnAddRef.addEventListener('click', addBooks);

function onTittleClick(e) {
    const bookObj = books.find((book) => e.target.textContent === book.title);

    const markup = createPreviewMarkup(bookObj);
    divRight.innerHTML = markup;
}

function createPreviewMarkup({ id, title, author, img, plot }) {
    return `<div class="book" id="${id}">
    <h2>${title}</h2>
   <p>${author}</p>
   <img src="${img}" alt="${title}">
   <p>${plot}</p>
</div>`;
}

function deleteElement(e) {
    const targetItem = e.target.closest('.list__item');
    books = books.filter((book) => {
        return book.id !== targetItem.dataset.id;
    });

    console.log('books', books);
    list.innerHTML = '';
    renderList();

    const elem = document.querySelector('.book');
    if (!elem) return;
    if (elem.id === targetItem.dataset.id) elem.remove();
}

function editElement(e) {}

function addBooks(e) {
    const newBook = {
        id: Date.now(),
    };
    divRight.innerHTML = createFormMarkup();

    const inputs = document.querySelectorAll('input');
    inputs.forEach((input) =>
        input.addEventListener('change', onInputChange.bind(newBook))
    );
    const form = document.querySelector('form');
    form.addEventListener('submit', onSubmit.bind(newBook));
}

function createFormMarkup() {
    return `<form>
    <label
        >title
        <input name="title" type="text" />
    </label>
    <label
        >author
        <input name="author" type="text" />
    </label>
    <label
        >img url
        <input name="img" type="url" />
    </label>
    <label
        >plot
        <input name="plot" type="text" />
    </label>
    <button type="submit">save</button>
</form>`;
}

function onInputChange(e) {
    this[e.target.name] = e.target.value;
    console.log('this', this);
}

function onSubmit(e) {
    e.preventDefault();
    books.push(this);
    list.innerHTML = '';
    renderList();
}
